<!DOCTYPE html>
<html lang="en" class="dark light">

    <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="base" content="https:&#x2F;&#x2F;Frankfurt-UAS-AI-Drone.github.io">

    

    
    
    
        <title>
            
                2_Configuration
            
        </title>

        
            <meta property="og:title"
                  content="2_Configuration" />
        
    

    
        
            <meta property="og:description" content="Team &#x27;Bananastalker&#x27;" />
        
    

    
        
            <meta name="description" content="Team &#x27;Bananastalker&#x27;" />
        
    

    
    

    
    
        <link href=https://Frankfurt-UAS-AI-Drone.github.io/fonts.css rel="stylesheet" />
    

    
    

    
    

    
    

    
    

    

    
    <link rel="alternate"
          type="application/atom+xml"
          title="Masterprojekt: Drohnen mit künstlicher Intelligenz"
          href="https://Frankfurt-UAS-AI-Drone.github.io/atom.xml">


    
    
        <link rel="stylesheet"
              type="text/css"
              href="https://Frankfurt-UAS-AI-Drone.github.io/theme/light.css" />
        <link id="darkModeStyle"
              rel="stylesheet"
              type="text/css"
              href="https://Frankfurt-UAS-AI-Drone.github.io/theme/dark.css" />
    

    <!-- Set the correct theme in the script -->

    
        <script src=https://Frankfurt-UAS-AI-Drone.github.io/js/themetoggle.js></script>

        
            <script>setTheme(getSavedTheme());</script>
        
    


    <link rel="stylesheet"
          type="text/css"
          media="screen"
          href="https://Frankfurt-UAS-AI-Drone.github.io/main.css" />

    

    <script defer
                    src="https://Frankfurt-UAS-AI-Drone.github.io/search_index.en.js?h=4121a03cc048544de77e"></script>
        <script defer
                src="https://Frankfurt-UAS-AI-Drone.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e"></script></head>


    <body>
        <div class="content">
            <header>
    <div class="main">
        
            <a href=https:&#x2F;&#x2F;Frankfurt-UAS-AI-Drone.github.io>Masterprojekt: Drohnen mit künstlicher Intelligenz</a>
        


        <div class="socials">
            
                <a rel="me" href="https:&#x2F;&#x2F;github.com&#x2F;Frankfurt-UAS-AI-Drone" class="social">
                    <img alt="github"
                         src="https://Frankfurt-UAS-AI-Drone.github.io/icons/social/github.svg">
                </a>
            
        </div>
    </div>

    <nav>
        
            <a href=https://Frankfurt-UAS-AI-Drone.github.io/dronehardware style="margin-left: 0.25em">Hardware</a>
        
            <a href=https://Frankfurt-UAS-AI-Drone.github.io/droneconfig style="margin-left: 0.25em">Config</a>
        
            <a href=https://Frankfurt-UAS-AI-Drone.github.io/raspberrypi style="margin-left: 0.25em">Raspberry_Pi</a>
        
            <a href=https://Frankfurt-UAS-AI-Drone.github.io/application style="margin-left: 0.25em">App</a>
        
            <a href=https://Frankfurt-UAS-AI-Drone.github.io/furtherwork style="margin-left: 0.25em">Further_Work</a>
        
            <a href=https://Frankfurt-UAS-AI-Drone.github.io/about style="margin-left: 0.25em">About</a>
        

        
            <button id="search-button"
                    class="search-button"
                    title="$SHORTCUT to open search">
                <img src="https://Frankfurt-UAS-AI-Drone.github.io/icons/search.svg"
                     alt="Search"
                     class="search-icon">
            </button>

            <div id="searchModal"
                 class="search-modal js"
                 role="dialog"
                 aria-labelledby="modalTitle">
                <div id="modal-content">
                    <h1 id="modalTitle" class="page-header">Search</h1>
                    <div id="searchBar">
                        <input id="searchInput"
                               role="combobox"
                               autocomplete="off"
                               spellcheck="false"
                               aria-expanded="false"
                               aria-controls="results-container"
                               placeholder="Search..." />
                        <button id="clear-search" class="clear-button" title="Clear search">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                                <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
                            </svg>
                        </button>
                    </div>
                    <div id="results-container">
                        <div id="results-info">
                            <span id="zero_results" style="display: none;">No results</span>
                            <span id="one_result" style="display: none;">1 result</span>
                            <span id="many_results" style="display: none;">$NUMBER results</span>
                        </div>
                        <div id="results" role="listbox"></div>
                    </div>
                </div>
            </div>
        

        
            <a id="dark-mode-toggle"
               onclick="toggleTheme(); event.preventDefault();"
               href="#">
                <img src="https://Frankfurt-UAS-AI-Drone.github.io/icons/sun.svg"
                     id="sun-icon"
                     style="filter: invert(1)"
                     alt="Light" />
                <img src=https://Frankfurt-UAS-AI-Drone.github.io/icons/moon.svg id="moon-icon" alt="Dark" />
            </a>

            <!-- Inititialize the theme toggle icons -->
            <script>updateItemToggleTheme()</script>
        
    </nav>
</header>


            
            
    
    <main>
        <article>
            <div class="title">
                
                
    <div class="page-header">
        2_Configuration<span class="primary-color" style="font-size: 1.6em">.</span>
    </div>


                <div class="meta">
                    
                        Posted on <time>2025-06-16</time>
                    

                    

                    

                    :: 1312 Words

                    
                    

                    
                    

                    

                </div>
            </div>

            

            
            

            <section class="body">
                <p>The following section covers all aspects related to the configuration of the controller used to fly the drone. This includes setting up input channels, assigning switches, and adjusting flight modes to ensure full manual control and reliable communication with the drone. As mentioned in the hardware section, we used the <code>Radiomaster Boxer ELRS GRYM2</code> as a controller.</p>
<h1 id="different-settings">Different Settings</h1>
<ul>
<li>Board and Sensor Alignment: The yaw angle needed to be set to 0° instead of the default 45° to ensure correct orientation of the flight controller.</li>
<li>GPS Activation: GPS functionality had to be enabled manually under the "Other Features" menu.</li>
<li>Throttle Configuration: In the "PID Tuning" section, under "Rateprofile Settings", we set the Throttle Limit to Scale at 70% to reduce overall throttle responsiveness.</li>
<li>Motor Direction Setup: In the "Motors" tab, the correct motor spin direction was configured—this determines whether the motors spin inward or outward relative to the center of the drone.</li>
</ul>
<h1 id="camera-settings">Camera Settings</h1>
<ol>
<li>Set UART3 Peripheral to "IRCTramp" and save.</li>
<li>In the CLI page, enter the following commands: set osd_displayport_device = MAX7456 and save.</li>
<li>In the OSD tab, set the video format to PAL or NTSC (depending on the camera protocol)</li>
</ol>
<h1 id="controller">Controller</h1>
<h2 id="startup-warnings">Startup Warnings</h2>
<p>When the controller is powered on, it may display the following warnings:</p>
<ul>
<li>Throttle Warning: Triggered if the throttle stick (left stick) is not in the lowest position when turned on.</li>
<li>Switch Warning:   Appears when one or more switches are not in their default positions.</li>
<li>Alarms Warning:   Shown if the sound mode is set to mute, which may prevent important audio alerts.</li>
<li>SD Card Warning:  Displayed if the SD card's content version does not match the controller’s firmware version. If you are facing issues regarding the SD Card Warning, please have a look at this <a href="https://oscarliang.com/fix-sd-card-warning-opentx/">fix</a>.</li>
</ul>
<h2 id="channels">Channels</h2>
<h3 id="channel-mappings">Channel Mappings</h3>
<p>Channel mapping of a controller refers to the way specific control inputs (like stick movements or switch toggles) are assigned to output channels that are sent to the flight controller or receiver. Each channel carries a particular function and channel mapping determines which input controls which channel.
There are two common channel mapping schemes for RC controllers: AETR and TAER. We chose AETR, as this is the default configuration in Betaflight (AETR1234).
AETR stands for Aileron (A), Elevator (E), Throttle (T), and Rudder (R), corresponding to the basic control axes of the drone.</p>
<ol>
<li>From the home screen, press the Model button.</li>
<li>Navigate to Mixes tab by pressing the Page button until the heading shows up.</li>
<li>The following maps the channels according to the AETR (Betaflight default):
<ol>
<li>Channel 1 Aileron (Roll – left/right)
<ul>
<li>Highlight CH1 using the jog wheel and press to enter the setup.</li>
<li>Set Source to <em>aileron</em> stick. -&gt; Optionally, adjust Weight (how much stick movement passed to output) or apply Expo for smoother control.</li>
</ul>
</li>
<li>Channel 2 Elevator (Pitch – forward/backward) -&gt; Highlight CH2 and set the Source to the elevator stick.</li>
<li>Channel 3 Throttle (speed up/down) -&gt; Highlight CH3 and set the Source to the throttle stick.</li>
<li>Channel 4 Rudder (Yaw – rotate left/right) -&gt; Highlight CH4 and set the Source to the rudder stick.</li>
</ol>
</li>
</ol>
<h3 id="default-channels">Default Channels</h3>
<ul>
<li>To change the <em><strong>default channel</strong></em> order in EdgeTX do the following:
<ol>
<li>Press the <strong>SYS</strong> button and navigate to the <em>Settings</em> tab with the <strong>PAGE</strong> button.</li>
<li>Scroll down to find the <em>Default Channel Order</em> setting and set it to <strong>AETR</strong></li>
<li>Press return to save the changes.</li>
</ol>
</li>
</ul>
<h3 id="channel-testing">Channel testing</h3>
<ul>
<li>Testing the channel mapping setup:
<ol>
<li>Connect your drone and open the Receiver tab in Betaflight Configurator</li>
<li>Move the sticks and see if the corresponding channels respond correctly.
<ol>
<li>CH 5 corresponds to AUX 1, CH 6 corresponds to AUX 2 and so on...</li>
</ol>
</li>
</ol>
</li>
</ul>
<h2 id="switches">Switches</h2>
<p>The switches on the controller are used to perform key functions such as arming the drone, changing flight modes, or triggering features like GPS rescue.
It’s recommended to use Channel 5 for arming the drone. To configure this:</p>
<ol>
<li>Navigate to the Mixes page, highlight Channel 5, and press the jog wheel to enter its settings.</li>
<li>Scroll to the Source field and flip the switch you want to assign for arming (e.g. SA or SD).</li>
<li>Leave the other values at their default and save the configuration.</li>
</ol>
<p>For flight mode selection, it's recommended to use a 3-position switch (e.g. SC or SD) to allow easy toggling between multiple modes. After selecting your switch:</p>
<ol>
<li>Go to the next free channel (e.g. CH6).</li>
<li>Repeat the same setup process as for arming, assigning the chosen switch to this channel.</li>
</ol>
<h2 id="modes">Modes</h2>
<h3 id="setting-up-modes">Setting up Modes</h3>
<p>Setting up modes is essential for configuring your controller to trigger specific flight functions like arming, flight modes, or GPS rescue. Before assigning any modes, make sure the corresponding AUX channels are already configured on your transmitter.</p>
<p>Follow these steps to set up modes in the Betaflight Configurator:</p>
<ol>
<li>Open the Modes tab in Betaflight Configurator.</li>
<li>Select the desired mode (e.g., ARM) and click “Add Range.”</li>
<li>Choose the appropriate AUX channel from the dropdown (e.g., AUX 1, which is typically Channel 5).</li>
<li>Drag the range slider to define when the mode should be active, based on your switch type:
<ul>
<li>2-position switch:
<ul>
<li>UP = ~1000</li>
<li>DOWN = ~2000</li>
</ul>
</li>
<li>3-position switch:
<ul>
<li>UP = ~1000</li>
<li>MID = ~1500</li>
<li>DOWN = ~2000</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>Repeat this process for each additional mode you'd like to configure, such as ANGLE, HORIZON, ACRO, or GPS RESCUE.</p>
<h3 id="used-modes">Used Modes</h3>
<p>We used two key flight modes in our setup: Arm and Angle.</p>
<p>The Arm mode is required to activate the motors and make the drone ready for flight. When enabled, the motors spin at idle speed, allowing the drone to respond to throttle input. Without arming, the drone cannot take off or be controlled via the transmitter. To ensure intentional activation, arming is configured to require two switches on the controller.</br>
The Angle mode is a stabilized flight mode that automatically levels the drone horizontally when the sticks are released. It limits the maximum tilt angle, making it easier to control and preventing the drone from flipping. This is especially useful for beginner pilots or situations where stable flight is important.</p>
<p>Additionally, many other flight modes can be configured, such as Acro, Acro Trainer, Horizon, and others. For a complete overview of all available modes, please refer to the list <a href="https://betaflight.com/docs/development/Modes">here</a>.</p>
<h3 id="mode-configuration">Mode Configuration</h3>
<p>In the Modes tab, we configured Arm on AUX1 and AUX2, Angle Mode on AUX5, and MSP Override Mode on AUX4. The overwrite mode is active in the range from 1775 to 2100 and is controlled via a three-position switch, which is used for activating the autopilot. More details about this feature are provided on the <a href="/application">Application Page</a>.</p>
<h2 id="port-configurations">Port Configurations</h2>
<ul>
<li>UART3: Configured with the VTX (IRC Tramp) protocol under the Peripherals section to enable control of the video transmitter.</li>
<li>UART4: Enabled MSP for Bluetooth Low Energy (BLE) communication.</li>
<li>UART5: Assigned to GPS under Sensor Input, with a baud rate of 57600.</li>
<li>UART6: Configured with Serial RX to receive input from the radio receiver.</li>
</ul>
<h2 id="msp-override-mask">MSP Override Mask</h2>
<p>The MSP override command allows external control over the drone’s flight controller, bypassing its default behavior. In our project, we used the MSP override mask to grant full control to the Raspberry Pi, enabling it to manage the drone’s flight autonomously. To read more about how the drone flies itself, please have a look at <a href="/furtherwork">Further Work page</a> and <a href="/application">Application page</a>.</p>
<p>To hand over control to the Raspberry Pi for the autopilot, the MSP override mask must be configured. This is done via the CLI in Betaflight. In our setup, we set the mask to 00001111, which grants the Raspberry Pi control over throttle, yaw, pitch, and roll. For more information, please have a look <a href="https://medium.com/illumination/fpv-autonomous-operation-with-betaflight-and-raspberry-pi-0caeb4b3ca69">here</a>.</p>

            </section>
        </article>
    </main>



            
                
            

            
        </div>
    </body>

</html>
